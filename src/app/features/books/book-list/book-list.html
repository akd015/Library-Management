<mat-card class="toolbar-card">
  <mat-card-content class="toolbar">
    <div>
      <h2>Browse Books</h2>
      <p class="subtitle">Search and explore the catalog</p>
    </div>
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Search by title, author, genre, ISBN</mat-label>
      <input matInput [formControl]="search" placeholder="e.g. Clean Architecture" />
    </mat-form-field>
  </mat-card-content>
</mat-card>

<mat-card>
  <mat-card-header>
    <mat-card-title>Table View</mat-card-title>
    <mat-card-subtitle>Quick glance at availability</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content *ngIf="filteredBooks$ | async as books">
    <table mat-table [dataSource]="books" class="mat-elevation-z1 full-width">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let b">{{ b.title }}</td>
      </ng-container>

      <ng-container matColumnDef="author">
        <th mat-header-cell *matHeaderCellDef>Author</th>
        <td mat-cell *matCellDef="let b">{{ b.author }}</td>
      </ng-container>

      <ng-container matColumnDef="genre">
        <th mat-header-cell *matHeaderCellDef>Genre</th>
        <td mat-cell *matCellDef="let b">{{ b.genre }}</td>
      </ng-container>

      <ng-container matColumnDef="availableCopies">
        <th mat-header-cell *matHeaderCellDef>Available</th>
        <td mat-cell *matCellDef="let b">
          {{ b.availableCopies }} / {{ b.totalCopies }}
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let b">
          <a mat-button color="primary" [routerLink]="['/books', b.id]">View</a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <p *ngIf="books.length === 0" class="empty">No books match your search.</p>
  </mat-card-content>
</mat-card>

<mat-card>
  <mat-card-header>
    <mat-card-title>Browse by Card</mat-card-title>
    <mat-card-subtitle>Richer details for each title</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content *ngIf="filteredBooks$ | async as books">
    <div class="card-grid">
      <mat-card *ngFor="let b of books" class="book-card">
        <mat-card-title>{{ b.title }}</mat-card-title>
        <mat-card-subtitle>{{ b.author }} • {{ b.genre }}</mat-card-subtitle>
        <mat-card-content>
          <p *ngIf="b.description">{{ b.description }}</p>
          <p><strong>ISBN:</strong> {{ b.isbn }}</p>
          <p *ngIf="b.publishedYear"><strong>Year:</strong> {{ b.publishedYear }}</p>
          <p>
            <strong>Availability:</strong> {{ b.availableCopies }} / {{ b.totalCopies }}
            <span *ngIf="b.isPopular">• Popular</span>
          </p>
        </mat-card-content>
        <mat-card-actions>
          <a mat-button color="primary" [routerLink]="['/books', b.id]">View</a>
          <a mat-button color="accent" routerLink="/borrow">Borrow</a>
        </mat-card-actions>
      </mat-card>
    </div>
    <p *ngIf="books.length === 0" class="empty">No books match your search.</p>
  </mat-card-content>
</mat-card>
