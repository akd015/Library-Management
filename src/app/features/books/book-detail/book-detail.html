<mat-card *ngIf="book$ | async as book; else notFound">
  <mat-card-header>
    <mat-card-title>{{ book.title }}</mat-card-title>
    <mat-card-subtitle>{{ book.author }} â€¢ {{ book.genre }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <p><strong>ISBN:</strong> {{ book.isbn }}</p>
    <p *ngIf="book.publishedYear"><strong>Published:</strong> {{ book.publishedYear }}</p>
    <p *ngIf="book.description">{{ book.description }}</p>

    <p class="availability">
      <strong>Availability:</strong> {{ book.availableCopies }} / {{ book.totalCopies }}
    </p>
  </mat-card-content>

  <mat-card-actions>
    <a mat-button routerLink="/books">Back</a>
    <a mat-raised-button color="primary" routerLink="/borrow">Borrow</a>
    <a mat-raised-button color="accent" routerLink="/return">Return</a>
  </mat-card-actions>
</mat-card>

<ng-template #notFound>
  <mat-card>
    <mat-card-title>Book not found</mat-card-title>
    <mat-card-actions>
      <a mat-button routerLink="/books">Back to books</a>
    </mat-card-actions>
  </mat-card>
</ng-template>
